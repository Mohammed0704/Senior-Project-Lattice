<!DOCTYPE html>
<html>
<link rel='stylesheet' href='/static_files/main.css' />
<link rel='stylesheet' href='/static_files/portal_data_source_connections.css' />
 

<center>
  <head>
      <title>Data Source Connections Portal</title>
      <b>
          <h1 style="margin-bottom: 1.5%;">Data Source Connections Portal</h1>
      </b>
  </head>
  
  <body>
    <div id="outer-content-box">
      <p id="title">Connection Metadata</p>
      <div id="inner-content-box">
        <table id="connections-table">
          <tr>
            <th style="width:20%; font-size: 22px;">Name</th>
            <th style="width:20%; font-size: 22px;">Type</th>
            <th style="width:30%; font-size: 22px;">URL</th>
            <th style="width:20%; font-size: 22px;">Username</th>
            <th style="width:10%; font-size: 22px;"></th>
          </tr>
          {% for values in connectionsList %}
          <tr id="{{ values[0] }}-row">
            {% for value in values %}
            <td> {{ value }}</td>
            {% endfor %}
            <td>
              <center>
                <button class="delete-button delete-button1" name="{{ values[0] }}">Delete</button>
              </center>
            </td>
          </tr>
          {% endfor %}
        </table>
      </div>
      <a href="/connections/create" class="button button1">Create New</a>
    </div>
  </body>
</center>

<script src="/static_files/jquery-3.1.1.js"></script>

<script>
$(".delete-button").click(function(event)
{
  elementToDeleteName = $(this).attr("name")
  console.log("Deleting " + elementToDeleteName + "...");
  $("#" + elementToDeleteName + "-row").remove()

  $.ajax({
    url: "/connections/remove",
    type: "get",
    data: {jsdata: elementToDeleteName}
  });
});

</script>
</html>