<!DOCTYPE html>
<html>
<link rel='stylesheet' href='/static_files/main.css' />
<link rel='stylesheet' href='/static_files/portal_tag_management.css' />
 
<center>
  <head>
      <title>Tag Management Portal</title>
      <b>
          <h1 style="margin-bottom: 1.5%;">Tag Management Portal</h1>
      </b>
  </head>
  
  <body>
    <div id="outer-content-box">
      <p style="margin-top: 1.6%; margin-bottom: 1.6%;" id="title">Current Tags</p>
      <div id="inner-content-box">
        <table id="tags-table">
          <tr id="table-header">
            <th style="width:88%; font-size: 22px;">Tag Name</th>
            <th style="width:12%; font-size: 22px;">Delete</th>
          </tr>
          {% if tagDict|length > 0 %}
            {% for tagKey, columnsTaggedList in tagDict.items() %}
              <tr id="{{ tagKey }}-row">
                <td> {{ tagKey }}</td>
                <td>
                  <center>
                    <button class="delete-button delete-button1" name="{{ tagKey }}">Delete</button>
                  </center>
                </td>
              </tr>
            {% endfor %}
          {% endif %}
        </table>
      </div>
      <a href="/tags/create">
        <button class="button button1">Create New</button>
      </a>
    </div>
  </body>
</center>

<script src="/static_files/jquery-3.1.1.js"></script>

<script>
  $(".delete-button").click(function(event)
  {
    elementToDeleteName = $(this).attr("name")
    if (confirm("Are you sure you want to delete this tag? This tag will also be deleted from the selected tags in the Data Object Management Portal")) {
      console.log("Deleting " + elementToDeleteName + "...");
      $("#" + elementToDeleteName.replace( /(:|\.|\[|\])/g, "\\$1" ) + "-row").remove()
  
      $.ajax({
        url: "/tags/remove/" + elementToDeleteName,
        type: "delete"
      });
    }
  });
</script>


</html>